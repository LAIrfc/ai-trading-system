# é¡¹ç›®ç›®å½•ç»“æ„

> æ›´æ–°æ—¥æœŸï¼š2026-03-02

```
ai-trading-system/
â”‚
â”œâ”€â”€ src/                           # ğŸ§  æ ¸å¿ƒæºç 
â”‚   â”œâ”€â”€ strategies/                # äº¤æ˜“ç­–ç•¥å®ç°
â”‚   â”‚   â”œâ”€â”€ base.py                    # ç­–ç•¥åŸºç±»
â”‚   â”‚   â”œâ”€â”€ macd_cross.py              # MACDäº¤å‰ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ ma_cross.py                # å‡çº¿äº¤å‰ç­–ç•¥ï¼ˆå«æ¢æ‰‹ç‡è¾…åŠ©ï¼‰
â”‚   â”‚   â”œâ”€â”€ rsi_signal.py              # RSIä¿¡å·ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ bollinger_band.py          # å¸ƒæ—å¸¦ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ kdj_signal.py              # KDJä¿¡å·ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ fundamental_pe.py          # PEåŸºæœ¬é¢ç­–ç•¥ï¼ˆåˆ†è¡Œä¸šåˆ†ä½æ•°ï¼‰
â”‚   â”‚   â”œâ”€â”€ fundamental_pb.py          # PBåŸºæœ¬é¢ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ fundamental_pe_pb.py       # PE+PBåŒå› å­ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ ensemble.py                # ç»„åˆæŠ•ç¥¨ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ dual_momentum.py           # åŒæ ¸åŠ¨é‡ç­–ç•¥
â”‚   â”‚   â””â”€â”€ turnover_helper.py         # æ¢æ‰‹ç‡è¾…åŠ©æ¨¡å—
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                      # æ ¸å¿ƒæ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ portfolio.py               # æŒä»“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ signal_engine.py           # ä¿¡å·å¼•æ“
â”‚   â”‚   â”œâ”€â”€ trade_journal.py           # äº¤æ˜“æ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ risk/                      # é£æ§æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ risk_manager.py            # é£é™©ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ strategy/                  # ç­–ç•¥æ¡†æ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ base_strategy.py           # ç­–ç•¥åŸºç±»ï¼ˆæ¡†æ¶å±‚ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ strategy_executor.py       # ç­–ç•¥æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ strategy_library.py        # ç­–ç•¥åº“
â”‚   â”‚   â”‚   â””â”€â”€ strategy_rule_engine.py    # è§„åˆ™å¼•æ“
â”‚   â”‚   â””â”€â”€ simulator/                # æ¨¡æ‹Ÿäº¤æ˜“
â”‚   â”‚       â””â”€â”€ paper_trading.py           # çº¸é¢äº¤æ˜“
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                      # æ•°æ®è·å–
â”‚   â”‚   â”œâ”€â”€ fetchers/                  # æ•°æ®æŠ“å–å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ fundamental_fetcher.py     # åŸºæœ¬é¢æ•°æ®ï¼ˆPE/PB/å¸‚å€¼ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ etf_data_fetcher.py        # ETFæ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ market_data.py             # è¡Œæƒ…æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ realtime_data.py           # å®æ—¶æ•°æ®
â”‚   â”‚   â”œâ”€â”€ collectors/                # æ•°æ®é‡‡é›†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ market_data_collector.py
â”‚   â”‚   â”œâ”€â”€ fundamental_fetcher.py     # â† å…¼å®¹å±‚ï¼ˆé‡å¯¼å‡ºï¼‰
â”‚   â”‚   â”œâ”€â”€ etf_data_fetcher.py        # â† å…¼å®¹å±‚
â”‚   â”‚   â””â”€â”€ realtime_data.py           # â† å…¼å®¹å±‚
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                       # åˆ¸å•†æ¥å£
â”‚   â”‚   â””â”€â”€ broker/
â”‚   â”‚       â”œâ”€â”€ tonghuashun_desktop.py     # åŒèŠ±é¡ºæ¡Œé¢ç«¯
â”‚   â”‚       â”œâ”€â”€ tonghuashun_simulator.py   # åŒèŠ±é¡ºæ¨¡æ‹Ÿ
â”‚   â”‚       â””â”€â”€ web_broker_base.py         # Webåˆ¸å•†åŸºç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                     # å·¥å…·æ¨¡å—
â”‚   â”‚   â””â”€â”€ pool_loader.py             # é€šç”¨è‚¡ç¥¨æ± åŠ è½½å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                        # AIæ¨¡å—ï¼ˆé¢„ç•™ï¼‰
â”‚   â”œâ”€â”€ config/                    # å¹³å°é…ç½®
â”‚   â””â”€â”€ main.py                    # ä¸»å…¥å£
â”‚
â”œâ”€â”€ tools/                         # ğŸ”§ è¿ç»´å·¥å…·
â”‚   â”œâ”€â”€ data/                      # æ•°æ®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ refresh_stock_pool.py      # è‚¡ç¥¨æ± åˆ·æ–°ï¼ˆåˆå¹¶+åŸºæœ¬é¢è¿‡æ»¤ï¼‰
â”‚   â”‚   â”œâ”€â”€ quarterly_update.py        # å­£åº¦å®šæœŸæ›´æ–°
â”‚   â”‚   â””â”€â”€ kline_fetcher.py           # Kçº¿æ•°æ®è·å–
â”‚   â”‚
â”‚   â”œâ”€â”€ backtest/                  # å›æµ‹å·¥å…·
â”‚   â”‚   â”œâ”€â”€ batch_backtest.py          # å¤§è§„æ¨¡æ‰¹é‡å›æµ‹
â”‚   â”‚   â”œâ”€â”€ cross_validate.py          # ç­–ç•¥äº¤å‰éªŒè¯
â”‚   â”‚   â””â”€â”€ backtest_dual_momentum.py  # åŒæ ¸åŠ¨é‡å›æµ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ analysis/                  # åˆ†æå·¥å…·
â”‚   â”‚   â”œâ”€â”€ recommend_today.py         # æ¯æ—¥é€‰è‚¡æ¨è
â”‚   â”‚   â””â”€â”€ generate_trade_report.py   # äº¤æ˜“æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ optimization/              # å‚æ•°ä¼˜åŒ–
â”‚   â”‚   â””â”€â”€ optimize_macd.py           # MACDå‚æ•°ä¼˜åŒ–
â”‚   â”‚
â”‚   â”œâ”€â”€ portfolio/                 # æŒä»“ç®¡ç†
â”‚   â”‚   â””â”€â”€ daily_check.py            # æ¯æ—¥æŒä»“æ£€æŸ¥
â”‚   â”‚
â”‚   â””â”€â”€ testing/                   # æµ‹è¯•éªŒè¯
â”‚       â”œâ”€â”€ validate_turnover_effect.py    # æ¢æ‰‹ç‡æ•ˆæœéªŒè¯
â”‚       â”œâ”€â”€ test_fundamental.py        # åŸºæœ¬é¢ç­–ç•¥æµ‹è¯•
â”‚       â”œâ”€â”€ test_industry_pe.py        # è¡Œä¸šPEæµ‹è¯•
â”‚       â”œâ”€â”€ test_pb_strategy.py        # PBç­–ç•¥æµ‹è¯•
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ data/                          # ğŸ“Š æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ stock_pool_all.json            # â˜… ç»¼åˆè‚¡ç¥¨æ± ï¼ˆ869åª=812ä¸ªè‚¡+57ETFï¼‰
â”‚   â”œâ”€â”€ stock_pool.json                # èµ›é“é¾™å¤´æ± ï¼ˆ100åªï¼Œ7å¤§èµ›é“ï¼‰
â”‚   â”œâ”€â”€ stock_pool_600.json            # æŒ‡æ•°æˆåˆ†æ± ï¼ˆ826åªï¼ŒHS300+ZZ500ï¼‰
â”‚   â”œâ”€â”€ etf_pool.json                  # ETFæ± ï¼ˆ57åªï¼Œ8å¤§ç±»åˆ«ï¼‰
â”‚   â”œâ”€â”€ market_fundamental_cache.json  # åŸºæœ¬é¢æ•°æ®ç¼“å­˜
â”‚   â”œâ”€â”€ my_portfolio.json              # æˆ‘çš„æŒä»“
â”‚   â”œâ”€â”€ portfolio_state.json           # æŒä»“çŠ¶æ€
â”‚   â”œâ”€â”€ backtest_500_3year.json        # å›æµ‹ç»“æœï¼ˆ500åªÃ—3å¹´ï¼‰
â”‚   â”œâ”€â”€ backtest_results.json          # å›æµ‹ç»“æœ
â”‚   â”œâ”€â”€ daily_reports/                 # æ¯æ—¥æŠ¥å‘Š
â”‚   â””â”€â”€ trade_log.jsonl                # äº¤æ˜“æ—¥å¿—
â”‚
â”œâ”€â”€ config/                        # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ trading_config.yaml            # äº¤æ˜“é…ç½®ï¼ˆä¸»é…ç½®ï¼‰
â”‚   â”œâ”€â”€ risk_config.yaml               # é£æ§é…ç½®
â”‚   â””â”€â”€ *.yaml.example                 # é…ç½®æ¨¡æ¿
â”‚
â”œâ”€â”€ docs/                          # ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ DESIGN.md                      # ç³»ç»Ÿè®¾è®¡
â”‚   â”œâ”€â”€ STRUCTURE.md                   # ç›®å½•ç»“æ„ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ strategy/                      # ç­–ç•¥æ–‡æ¡£
â”‚   â”œâ”€â”€ fundamental/                   # åŸºæœ¬é¢æ–‡æ¡£
â”‚   â”œâ”€â”€ setup/                         # å®‰è£…/éƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ analysis/                      # åˆ†ææŠ¥å‘Šæ–‡æ¡£
â”‚   â”œâ”€â”€ reports/                       # ç”Ÿæˆçš„æŠ¥å‘Š
â”‚   â””â”€â”€ images/                        # å›¾ç‰‡èµ„æº
â”‚
â”œâ”€â”€ examples/                      # ğŸ“– ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ tests/                         # ğŸ§ª å•å…ƒæµ‹è¯•
â”œâ”€â”€ scripts/                       # ğŸ“œ Shellè„šæœ¬
â”œâ”€â”€ logs/                          # ğŸ“ æ—¥å¿—
â”œâ”€â”€ cache/                         # ğŸ’¾ ç¼“å­˜
â”‚
â”œâ”€â”€ run_daily.py                   # æ¯æ—¥è¿è¡Œå…¥å£
â”œâ”€â”€ requirements.txt               # Pythonä¾èµ–
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
â””â”€â”€ LICENSE                        # å¼€æºåè®®
```

## è‚¡ç¥¨æ± ä½“ç³»

| æ–‡ä»¶ | å†…å®¹ | æ•°é‡ | ç”¨é€” |
|------|------|------|------|
| `stock_pool_all.json` | ç»¼åˆæ± ï¼ˆä¸ªè‚¡+ETFï¼Œå«è¿‡æ»¤ï¼‰ | 869åª | **ä¸»åŠ›æ± **ï¼Œæ¨è/å›æµ‹/æ‰«æ |
| `stock_pool.json` | 7å¤§èµ›é“é¾™å¤´ | 100åª | ç²¾é€‰å¿«é€Ÿæ‰«æ |
| `stock_pool_600.json` | HS300+ZZ500æˆåˆ† | 826åª | æŒ‡æ•°æˆåˆ†åŸºç¡€ |
| `etf_pool.json` | è¡Œä¸š/å®½åŸº/è·¨å¢ƒETF | 57åª | ETFç‹¬ç«‹åˆ†æ |

### è¿‡æ»¤è§„åˆ™
- PE TTMï¼š0 ~ 100ï¼ˆæ’é™¤äºæŸå’Œæ³¡æ²«ï¼‰
- å¸‚å€¼ï¼š> 30äº¿
- æ’é™¤ST / *ST / é€€å¸‚

### æ›´æ–°æœºåˆ¶
```bash
# æ—¥å¸¸åˆå¹¶åˆ·æ–°
python3 tools/data/refresh_stock_pool.py

# å­£åº¦æ›´æ–°ï¼ˆæŒ‡æ•°æˆåˆ†+é¾™å¤´+åŸºæœ¬é¢ï¼‰
python3 tools/data/quarterly_update.py

# æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°
python3 tools/data/quarterly_update.py --check
```

## ç­–ç•¥ä½“ç³»

| ç­–ç•¥ | ç±»å‹ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|------|
| MACDäº¤å‰ | æŠ€æœ¯é¢ | `macd_cross.py` | é‡‘å‰/æ­»å‰ä¿¡å· |
| MAäº¤å‰ | æŠ€æœ¯é¢ | `ma_cross.py` | å‡çº¿äº¤å‰+æ¢æ‰‹ç‡è¾…åŠ© |
| RSIä¿¡å· | æŠ€æœ¯é¢ | `rsi_signal.py` | è¶…ä¹°è¶…å– |
| å¸ƒæ—å¸¦ | æŠ€æœ¯é¢ | `bollinger_band.py` | é€šé“çªç ´ |
| KDJä¿¡å· | æŠ€æœ¯é¢ | `kdj_signal.py` | éšæœºæŒ‡æ ‡ |
| PEç­–ç•¥ | åŸºæœ¬é¢ | `fundamental_pe.py` | åˆ†è¡Œä¸šPEåˆ†ä½æ•° |
| PBç­–ç•¥ | åŸºæœ¬é¢ | `fundamental_pb.py` | å¸‚å‡€ç‡ |
| PE+PBåŒå› å­ | åŸºæœ¬é¢ | `fundamental_pe_pb.py` | åŒå› å­å…±æŒ¯ |
| ç»„åˆæŠ•ç¥¨ | é›†æˆ | `ensemble.py` | å¤šç­–ç•¥åŠ æƒæŠ•ç¥¨ |

## å¸¸ç”¨å‘½ä»¤

```bash
# æ¯æ—¥æŒä»“æ£€æŸ¥
python3 tools/portfolio/daily_check.py

# ä»Šæ—¥é€‰è‚¡æ¨è
python3 tools/analysis/recommend_today.py --pool stock_pool_all.json

# å¤§è§„æ¨¡å›æµ‹
python3 tools/backtest/batch_backtest.py --pool data/stock_pool_all.json --count 500

# MACDå‚æ•°ä¼˜åŒ–
python3 tools/optimization/optimize_macd.py
```
